
@{
    ViewData["Title"] = "Index";
}
@model List<Emp>
<h1>Index</h1>

@if(TempData["msg"]!=null){
    @TempData["msg"]
}

<a asp-controller="Emp" asp-action="AddEmp" class="btn btn-info mb-3">Add Emp</a>

<form method="get" class="container">
    <div class="form-group row">
        <div class="col-6">
            <input type="text" name="searchString" class="form-control mb-3" placeholder="Search by name..." />

        </div>
        <div class="col-6">
            <button type="submit" class="btn  mb-3 btn-primary">Search</button>

        </div>
    </div>
</form>

@* <form id="searchForm" asp-action="SearchEmps" asp-controller="Emp" asp-action="Index" method="get">
    <p style="font-family:Bahnschrift">
        <input type="text" style="width:45%;height:35px" id="srch" name="searchString" value="@ViewData["CurrentFilter"]" />
        <input type="submit" id="srchbtn" value="Search" class="btn" style="background-color:gainsboro" />

    </p>
</form> *@<


<table class="table table-bordered">
    <thead class="table-dark">
        <tr>
            <th>
              <input type="checkbox" id="select-all" />
            </th>
            <th scope="col">Id</th>
            <th scope="col">Name</th>
            <th scope="col">Salary</th>
            <th scope="col">Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var i in Model)
        {
            <tr>
                <td>
                    <input type="checkbox" name="ids" value="@i.Id" />
                </td>
                <th scope="row">@i.Id</th>
                <td>@i.Name</td>
                <td>@i.Salary</td>
                <td>
                    <a asp-action="EditEmp" asp-controller="Emp" asp-route-id="@i.Id"><button class="btn btn-success" value="Edit">Edit</button></a>
                    <a asp-action="RemoveEmp" asp-controller="Emp" asp-route-id="@i.Id"><button class="btn btn-danger" value="Delete" onclick='return confirm("Are You Sure to Delete this Record?")'>Delete</button></a>
            </tr>
        }
    </tbody>
</table>

                @section Scripts {
    <script>
        document.getElementById('select-all').onclick = function () {
            var checkboxes = document.getElementsByName('ids');
            for (var checkbox of checkboxes) {
                checkbox.checked = this.checked;
            }
        }

        document.getElementById('searchForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent form submission

            var searchString = document.getElementById('srch').value.toLowerCase();
            var rows = document.querySelectorAll('#employeeTable tbody tr');

            rows.forEach(row => {
                var name = row.querySelector('td:nth-child(3)').textContent.toLowerCase();
                if (name.includes(searchString)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
    </script>

            }